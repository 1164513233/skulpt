describe("Turtle", function () {
    'use strict';
    var builtinRead = function (x) {
            if (Sk.builtinFiles === undefined || Sk.builtinFiles["files"][x] === undefined) {
                throw "File not found: '" + x + "'";
            }
            return Sk.builtinFiles["files"][x];
        },
        c = document.createElement('canvas'),
        ref = document.createElement('canvas'),
        loadImage = function (file) {
            var a = new Image();
            a.src = file;
            a.addEventListener('load', function () {
                ref.getContext('2d').drawImage(a, 0, 0);
            });
        };
        
    beforeEach(function () {
		jasmine.DEFAULT_TIMEOUT_INTERVAL = 10000;
        jasmine.addMatchers(imagediff.jasmine);
        TurtleGraphics = { doneDelegates: [] };
        Sk.configure({
            output: function(s) {
                console.log(s);
            },
            read: builtinRead
        });
        c.id = "turtlecanvas";
        c.width = "200";
        c.height = "200";
        c.style.display = "none";
        ref.id = "reffw100";
        ref.width = "200";
        ref.height = "200";
        document.body.appendChild(c);
        Sk.canvas = "turtlecanvas";
    });
    
    afterEach(function () {
        c.style.display = "none";
        c.getContext('2d').clearRect(0, 0, 200, 200);
    });
    
    it("should be able to draw the example on the home page", function (done) {
        var cctx = c.getContext("2d"),
            code = "import turtle\nt = turtle.Turtle()\nc = [ \"red\", \"green\", \"blue\", \"yellow\" ]\nfor color in c:\n    t.color(color)\n    t.forward(50)\n    t.left(360/len(c))",
            refctx = ref.getContext("2d");
        loadImage("data:image/png;base64,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");
        Sk.importMainWithBody("", false, code);
        TurtleGraphics.doneDelegates.push(function () {
            //1 for tolerance
            expect(cctx).toImageDiffEqual(refctx, 1);
            done();
        });
    });
    
    it("should be able to move 50 px forward", function (done) {
        var cctx = c.getContext("2d"),
            code = "import turtle\nt = turtle.Turtle()\nt.forward(50)",
            refctx = ref.getContext("2d");
        loadImage("data:image/png;base64,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");
        Sk.importMainWithBody("", false, code);
        TurtleGraphics.doneDelegates.push(function () {
            expect(cctx).toImageDiffEqual(refctx);
            done();
        });
    });
    
    it("should be able to change the color", function (done) {
        var cctx = c.getContext("2d"),
            code = "import turtle\nt = turtle.Turtle()\nt.color('red')\nt.forward(50)",
            refctx = ref.getContext("2d");
        loadImage("data:image/png;base64,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");
        Sk.importMainWithBody("", false, code);
        TurtleGraphics.doneDelegates.push(function () {
            expect(cctx).toImageDiffEqual(refctx);
            done();
        });
    });
    
    it("should be able to draw a circle", function (done) {
        var cctx = c.getContext("2d"),
            code = "import turtle\nt = turtle.Turtle()\nt.circle(50, 360)",
            refctx = ref.getContext("2d");
        loadImage("data:image/png;base64,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tsuchoTgi/GmldRJcRH/4yocyWpi7OFjE2QP8M5QZdDOIO+E8Jeu6onBz5fYXb2hSH5fiMJbJpBCOAY/8+b/KCTFeiIpSIgFZL332lCk/70NARNkG0Lx70sgM5gp9d4lnuux5j9xyY2+ZSWrNjJ1HicRMEH6iwgS5lZIeZpxW8nsEepBTyLwM4U9xC7DsW1l+fsNCJgg/YYGh0B88cFZieeg5hDOHZxGgoAJ0p8j2INsmqRzyZfEcK/Qnz8alWSCNIKplZvYO6wv83I5mP9ftVKCM2kdAROkdUg3ZkgSlIm6N+36w32vkkyQveDbSZkTay7Xcs+kr6MmO1XQN59GwARxVBiBSyBggjg8jIAJ4hgwAjEE3IPEcLOWCAImiIijbWYMARMkhpu1RBAwQUQcbTNjCJggMdysJYKACSLiaJsZQ8AEieFmLREETBARR9vMGAImSAw3a4kgYIKIONpmxhAwQWK4WUsEARNExNE2M4aACRLDzVoiCJggIo62mTEETJAYbtYSQcAEEXG0zYwhYILEcLOWCAImiIijbWYMARMkhpu1RBAwQUQcbTNjCJggMdysJYKACSLiaJsZQ8AEieFmLREETBARR9vMGAImSAw3a4kgYIKIONpmxhAwQWK4WUsEARNExNE2M4aACRLDzVoiCJggIo62mTEETJAYbtYSQcAEEXG0zYwhYILEcLOWCAImiIijbWYMARMkhpu1RBAwQUQcbTNjCJggMdysJYKACSLiaJsZQ8AEieFmLREETBARR9vMGAImSAw3a4kgYIKIONpmxhAwQWK4WUsEARNExNE2M4aACRLDzVoiCJggIo62mTEETJAYbtYSQcAEEXG0zYwhYILEcLOWCAImiIijbWYMARMkhpu1RBAwQUQcbTNjCJggMdysJYKACSLiaJsZQ8AEieFmLREETBARR9vMGAImSAw3a4kgYIKIONpmxhAwQWK4WUsEARNExNE2M4aACRLDzVoiCJggIo62mTEETJAYbtYSQcAEEXG0zYwhYILEcLOWCAImiIijbWYMARMkhpu1RBAwQUQcbTNjCJggMdysJYKACSLiaJsZQ8AEieFmLREETBARR9vMGAImSAw3a4kgYIKIONpmxhAwQWK4WUsEARNExNE2M4aACRLDzVoiCJggIo62mTEETJAYbtYSQcAEEXG0zYwhYILEcLOWCAImiIijbWYMARMkhpu1RBAwQUQcbTNjCJggMdysJYKACSLiaJsZQ8AEieFmLREETBARR9vMGAImSAw3a4kgYIKIONpmxhAwQWK4WUsEgf8BirDw2P5wajkAAAAASUVORK5CYII=");
        Sk.importMainWithBody("", false, code);
        TurtleGraphics.doneDelegates.push(function () {
            expect(cctx).toImageDiffEqual(refctx);
            done();
        });
    });
    
	it("should be able to stamp a grid", function (done) {
		var cctx = c.getContext("2d"),
			code = "import turtle\nt = turtle.Turtle()\nt.speed(100)\nt.up()\nx = range(-90,110,20)\ny = range(-90,110,20)\nfor i in x:\n    for j in y:\n        t.goto(j,i)\n        t.color(j,i+j,i)\n        t.stamp()",
			refctx = ref.getContext("2d");
		loadImage("data:image/png;base64,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");
		Sk.importMainWithBody("", false, code);
		TurtleGraphics.doneDelegates.push(function () {
			expect(cctx).toImageDiffEqual(refctx);
			done();
		});
	});
});