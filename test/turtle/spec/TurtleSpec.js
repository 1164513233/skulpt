describe("Turtle", function () {
    'use strict';
    var builtinRead = function (x) {
            if (Sk.builtinFiles === undefined || Sk.builtinFiles["files"][x] === undefined) {
                throw "File not found: '" + x + "'";
            }
            return Sk.builtinFiles["files"][x];
        },
        c = document.createElement('canvas'),
        ref = document.createElement('canvas'),
        loadImage = function (file) {
            var a = new Image();
            a.src = file;
            a.addEventListener('load', function () {
                ref.getContext('2d').drawImage(a, 0, 0);
            });
        };
        
    beforeEach(function () {
        jasmine.addMatchers(imagediff.jasmine);
        TurtleGraphics = { doneDelegates: [] };
        Sk.configure({
            output: function(s) {
                console.log(s);
            },
            read: builtinRead
        });
        c.id = "turtlecanvas";
        c.width = "200";
        c.height = "200";
        c.style.display = "none";
        ref.id = "reffw100";
        ref.width = "200";
        ref.height = "200";
        document.body.appendChild(c);
        Sk.canvas = "turtlecanvas";
    });
    
    afterEach(function () {
        c.style.display = "none";
        c.getContext('2d').clearRect(0, 0, 200, 200);
    });
    
    it("should be able to draw the example on the home page", function (done) {
        var cctx = c.getContext("2d"),
            code = "import turtle\nt = turtle.Turtle()\nc = [ \"red\", \"green\", \"blue\", \"yellow\" ]\nfor color in c:\n    t.color(color)\n    t.forward(50)\n    t.left(360/len(c))",
            refctx = ref.getContext("2d");
        loadImage("data:image/png;base64,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");
        Sk.importMainWithBody("", false, code);
        TurtleGraphics.doneDelegates.push(function () {
            //1 for tolerance
            expect(cctx).toImageDiffEqual(refctx, 1);
            done();
        });
    });
    
    it("should be able to move 50 px forward", function (done) {
        var cctx = c.getContext("2d"),
            code = "import turtle\nt = turtle.Turtle()\nt.forward(50)",
            refctx = ref.getContext("2d");
        loadImage("data:image/png;base64,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");
        Sk.importMainWithBody("", false, code);
        TurtleGraphics.doneDelegates.push(function () {
            expect(cctx).toImageDiffEqual(refctx);
            done();
        });
    });
    
    it("should be able to change the color", function (done) {
        var cctx = c.getContext("2d"),
            code = "import turtle\nt = turtle.Turtle()\nt.color('red')\nt.forward(50)",
            refctx = ref.getContext("2d");
        loadImage("data:image/png;base64,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");
        Sk.importMainWithBody("", false, code);
        TurtleGraphics.doneDelegates.push(function () {
            expect(cctx).toImageDiffEqual(refctx);
            done();
        });
    });
    
    it("should be able to draw a circle", function (done) {
        var cctx = c.getContext("2d"),
            code = "import turtle\nt = turtle.Turtle()\nt.circle(50, 360)",
            refctx = ref.getContext("2d");
        loadImage("data:image/png;base64,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tsuchoTgi/GmldRJcRH/4yocyWpi7OFjE2QP8M5QZdDOIO+E8Jeu6onBz5fYXb2hSH5fiMJbJpBCOAY/8+b/KCTFeiIpSIgFZL332lCk/70NARNkG0Lx70sgM5gp9d4lnuux5j9xyY2+ZSWrNjJ1HicRMEH6iwgS5lZIeZpxW8nsEepBTyLwM4U9xC7DsW1l+fsNCJgg/YYGh0B88cFZieeg5hDOHZxGgoAJ0p8j2INsmqRzyZfEcK/Qnz8alWSCNIKplZvYO6wv83I5mP9ftVKCM2kdAROkdUg3ZkgSlIm6N+36w32vkkyQveDbSZkTay7Xcs+kr6MmO1XQN59GwARxVBiBSyBggjg8jIAJ4hgwAjEE3IPEcLOWCAImiIijbWYMARMkhpu1RBAwQUQcbTNjCJggMdysJYKACSLiaJsZQ8AEieFmLREETBARR9vMGAImSAw3a4kgYIKIONpmxhAwQWK4WUsEARNExNE2M4aACRLDzVoiCJggIo62mTEETJAYbtYSQcAEEXG0zYwhYILEcLOWCAImiIijbWYMARMkhpu1RBAwQUQcbTNjCJggMdysJYKACSLiaJsZQ8AEieFmLREETBARR9vMGAImSAw3a4kgYIKIONpmxhAwQWK4WUsEARNExNE2M4aACRLDzVoiCJggIo62mTEETJAYbtYSQcAEEXG0zYwhYILEcLOWCAImiIijbWYMARMkhpu1RBAwQUQcbTNjCJggMdysJYKACSLiaJsZQ8AEieFmLREETBARR9vMGAImSAw3a4kgYIKIONpmxhAwQWK4WUsEARNExNE2M4aACRLDzVoiCJggIo62mTEETJAYbtYSQcAEEXG0zYwhYILEcLOWCAImiIijbWYMARMkhpu1RBAwQUQcbTNjCJggMdysJYKACSLiaJsZQ8AEieFmLREETBARR9vMGAImSAw3a4kgYIKIONpmxhAwQWK4WUsEARNExNE2M4aACRLDzVoiCJggIo62mTEETJAYbtYSQcAEEXG0zYwhYILEcLOWCAImiIijbWYMARMkhpu1RBAwQUQcbTNjCJggMdysJYKACSLiaJsZQ8AEieFmLREETBARR9vMGAImSAw3a4kgYIKIONpmxhAwQWK4WUsEARNExNE2M4aACRLDzVoiCJggIo62mTEETJAYbtYSQcAEEXG0zYwhYILEcLOWCAImiIijbWYMARMkhpu1RBAwQUQcbTNjCJggMdysJYKACSLiaJsZQ8AEieFmLREETBARR9vMGAImSAw3a4kgYIKIONpmxhAwQWK4WUsEgf8BirDw2P5wajkAAAAASUVORK5CYII=");
        Sk.importMainWithBody("", false, code);
        TurtleGraphics.doneDelegates.push(function () {
            expect(cctx).toImageDiffEqual(refctx);
            done();
        });
    });
    
    it("should be able to stamp a grid", function (done) {
        var cctx = c.getContext("2d"),
            code = "import turtle\nt = turtle.Turtle()\nimport turtle\nt = turtle.Turtle()\nt.speed(100)\nt.up()\ny = range(-90,110,20)\nx = range(110,-90,-20)\nfor i in x:\n    for j in y:\n        t.goto(j,i)\n        t.color(j,i+j,i)\n        t.stamp()",
            refctx = ref.getContext("2d");
        loadImage("data:image/png;base64,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");
        Sk.importMainWithBody("", false, code);
        TurtleGraphics.doneDelegates.push(function () {
            expect(cctx).toImageDiffEqual(refctx, 32);
            done();
        });
    });
});